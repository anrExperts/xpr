<form xmlns:xf="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events">
    <h1><xf:output value="if(eac:control/eac:recordId[.!=''],
      concat(eac:control/eac:recordId, ' | ', eac:cpfDescription/eac:identity/eac:nameEntry[@preferredForm = 'true'][1]/eac:part[@localType='full']),
      eac:cpfDescription/eac:identity/eac:nameEntry[@preferredForm = 'true'][1]/eac:part[@localType='full'])"/></h1>
    <xf:case id="controlPanel" selected="false">
        <xf:group ref="eac:control">
            <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-control']/tei:div[@type='fullName']"/>
            <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-control']/tei:div[@type='summary']"/></xf:hint>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-control']/tei:div[@type='description']"/></xf:help>
            <xf:group ref=".">
                <xf:select1 ref="@maintenanceStatus">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceStatus']/tei:div[@type='fullName']"  class="{if(is-valid(.), 'valid', 'invalid')}"/>
                    <xf:item>
                        <xf:label>cancelled</xf:label>
                        <xf:value>cancelled</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>deleted</xf:label>
                        <xf:value>deleted</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>deletedMerged</xf:label>
                        <xf:value>deletedMerged</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>deletedReplaced</xf:label>
                        <xf:value>deletedReplaced</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>deletedSplit</xf:label>
                        <xf:value>deletedSplit</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>derived</xf:label>
                        <xf:value>derived</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>new</xf:label>
                        <xf:value>new</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>revised</xf:label>
                        <xf:value>revised</xf:value>
                    </xf:item>
                    <!--<xf:hint><xf:output value="normalize-space(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceStatus']/tei:div[@type='summary'])"/></xf:hint>-->
                    <xf:help><xf:output value="normalize-space(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceStatus']/tei:div[@type='description'])"/></xf:help>
                </xf:select1>
                <xf:input ref="eac:recordId">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-recordId']/tei:div[@type='fullName']"/>
                    <xf:hint><xf:output value="normalize-space(instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-recordId']/tei:div[@type='summary'])"/></xf:hint>
                    <xf:help><xf:output value="normalize-space(instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-recordId']/tei:div[@type='description'])"/></xf:help>
                    <xf:alert><xf:output value="normalize-space(instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-recordId']/tei:div[@type='availability'])"/></xf:alert>
                </xf:input>
            </xf:group>
            <xf:group ref="eac:maintenanceAgency">
                <!--@todo control validation-->
                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceAgency']/tei:div[@type='fullName']"  class="{if(is-valid(.), 'valid', 'invalid')}"/>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceAgency']/tei:div[@type='description']"/></xf:help>
                <xf:alert><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceAgency']/tei:div[@type='availability']"/></xf:alert>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert if="eac:agencyCode" context="." nodeset="eac:agencyCode" origin="instance('eacMaintenanceAgency')/eac:agencyCode" at="last()" ev:event="DOMActivate"/>
                        <xf:insert if="not(eac:agencyCode)" context="." nodeset="*" origin="instance('eacMaintenanceAgency')/eac:agencyCode" at="1" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger>
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert if="eac:agencyName" context="." nodeset="eac:agencyName" origin="instance('eacMaintenanceAgency')/eac:agencyName" at="last()" ev:event="DOMActivate"/>
                        <xf:insert if="eac:agencyCode and not(eac:agencyName)" context="." nodeset="eac:agencyCode" origin="instance('eacMaintenanceAgency')/eac:agencyName" at="last()" ev:event="DOMActivate"/>
                        <xf:insert if="not(eac:agencyCode) and not(eac:agencyName)" context="." nodeset="*" origin="instance('eacMaintenanceAgency')/eac:agencyName" at="1" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger ref=".[eac:agencyCode]">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert if="eac:otherAgencyCode" context="." nodeset="eac:otherAgencyCode" origin="instance('eacMaintenanceAgency')/eac:otherAgencyCode" at="last()" ev:event="DOMActivate"/>
                        <xf:insert if="eac:agencyName and not(eac:otherAgencyCode)" context="." nodeset="eac:agencyName" origin="instance('eacMaintenanceAgency')/eac:otherAgencyCode" at="last()" ev:event="DOMActivate"/>
                        <xf:insert if="not(eac:agencyName) and not(eac:otherAgencyCode)" context="." nodeset="eac:agencyCode" origin="instance('eacMaintenanceAgency')/eac:otherAgencyCode" at="last()" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:repeat nodeset="eac:agencyCode">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='fullName']"/>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='description']"/></xf:help>
                    <xf:input ref=".">
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='summary']"/></xf:hint>
                        <xf:alert><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='availability']"/></xf:alert>
                    </xf:input>
                    <xf:group class="trigger">
                        <xf:trigger ref="self::eac:agencyCode[parent::eac:maintenanceAgency[not(eac:otherAgencyCode)] or count(parent::eac:maintenanceAgency[eac:otherAgencyCode]/eac:agencyCode) > 1]">
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyCode']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                </xf:repeat>
                <xf:repeat nodeset="eac:agencyName">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='fullName']"/>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='description']"/></xf:help>
                    <xf:input ref=".">
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='summary']"/></xf:hint>
                        <xf:alert><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='availability']"/></xf:alert>
                    </xf:input>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agencyName']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                </xf:repeat>
                <xf:repeat nodeset="eac:otherAgencyCode">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='fullName']"/>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='description']"/></xf:help>
                    <xf:input ref=".">
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='summary']"/></xf:hint>
                        <xf:alert><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='availability']"/></xf:alert>
                    </xf:input>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherAgencyCode']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                </xf:repeat>
            </xf:group>
            <xf:group ref="eac:maintenanceHistory">
                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceHistory']/tei:div[@type='fullName']"/>
                <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceHistory']/tei:div[@type='summary']"/></xf:hint>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceHistory']/tei:div[@type='description']"/></xf:help>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceEvent']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="." nodeset="eac:maintenanceEvent" at="1" position="before" origin="instance('eacMaintenanceEvent')/eac:maintenanceEvent"/>
                        </xf:action>
                        <!--<xf:delete nodeset="eac:maintenanceEvent[last()]/eac:eventDescription" ev:event="DOMActivate"/>-->
                    </xf:trigger>
                </xf:group>
                <xf:repeat nodeset="eac:maintenanceEvent">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceEvent']/tei:div[@type='fullName']"/>
                    <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceEvent']/tei:div[@type='summary']"/></xf:hint>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceEvent']/tei:div[@type='description']"/></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger ref="self::eac:maintenanceEvent[count(parent::eac:maintenanceHistory/eac:maintenanceEvent) > 1]">
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-maintenanceEvent']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger ref="self::eac:maintenanceEvent[not(eac:eventDescription)]">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-eventDescription']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert if="self::eac:maintenanceEvent[not(eac:eventDescription)]" context="." nodeset="eac:eventDateTime" origin="instance('eacMaintenanceEvent')/eac:maintenanceEvent/eac:eventDescription" at="last()" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:select1 ref="@maintenanceEventType">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceEventType']/tei:div[@type='fullName']"   class="{if(is-valid(.), 'valid', 'invalid')}"/>
                        <xf:item>
                            <xf:label>cancelled</xf:label>
                            <xf:value>cancelled</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>created</xf:label>
                            <xf:value>created</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>deleted</xf:label>
                            <xf:value>deleted</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>derived</xf:label>
                            <xf:value>derived</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>revised</xf:label>
                            <xf:value>revised</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>unknown</xf:label>
                            <xf:value>unknown</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>updated</xf:label>
                            <xf:value>updated</xf:value>
                        </xf:item>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceEventType']/tei:div[@type='summary']"/></xf:hint>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-maintenanceEventType']/tei:div[@type='description']"/></xf:help>
                    </xf:select1>
                    <xf:input ref="eac:agent">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agent']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agent']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-agent']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <xf:select1 ref="eac:agent/@agentType">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-agentType']/tei:div[@type='fullName']"   class="{if(is-valid(.), 'valid', 'invalid')}"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-agentType']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-agentType']/tei:div[@type='summary']"/></xf:hint>
                        <xf:item>
                            <xf:label>human</xf:label>
                            <xf:value>human</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>machine</xf:label>
                            <xf:value>machine</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>unknown</xf:label>
                            <xf:value>unknown</xf:value>
                        </xf:item>
                    </xf:select1>
                    <xf:input ref="eac:eventDateTime/@standardDateTime">
                        <!-- @rmq @standardDateTime is optional we can type text into eventDateTime directly (so there is no ISO dateTime required) -->
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDateTime']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDateTime']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDateTime']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <xf:textarea ref="eac:eventDescription">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-eventDescription']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-eventDescription']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-eventDescription']/tei:div[@type='summary']"/></xf:hint>
                    </xf:textarea>
                    <xf:trigger ref="self::eac:maintenanceEvent[eac:eventDescription]">
                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-eventDescription']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:delete if="self::eac:maintenanceEvent[eac:eventDescription]" context="." nodeset="eac:eventDescription" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:repeat>
            </xf:group>
            <xf:trigger>
                <xf:label>Sauvegarder le fichier</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert nodeset="instance('eacNoValidation')" origin="instance('eacInstance')"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:send submission="noValidationSubmission"/>
                </xf:action>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="sourcesPanel" selected="true">
        <xf:group class="trigger">
            <xf:trigger ref="eac:control[not(eac:sources)]">
                <xf:label>Sources</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:maintenanceHistory" origin="instance('eacSources')/eac:sources" position="after"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:delete nodeset="eac:sources/eac:source/eac:descriptiveNote"/>
                    <xf:delete nodeset="eac:sources/eac:source/eac:citedRange"/>
                    <!--<xf:delete nodeset="eac:sources/eac:source/eac:reference/@href"/>-->
                    <!--@todo generate-id() with basex-->
                    <!--<xf:setvalue ref="eac:sources/eac:source[@xml:id='']/eac:reference[@xml:id='']/@xml:id" value="concat('source_', count(eac:sources/eac:source)+1, '_ref_1')"/>
                  <xf:setvalue ref="eac:sources/eac:source[@xml:id='']/@xml:id" value="concat('source_', count(eac:sources/eac:source)+1)"/>-->
                </xf:action>
                <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:control/eac:sources">
            <xf:label>
                Sources
                <xf:trigger ref="self::eac:sources[not(ancestor::eac:eac//@sourceReference[contains(., current()/eac:source/@id)])]" class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>Supprimer toutes les sources</xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-sources']/tei:div[@type='summary']"/></xf:hint>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-sources']/tei:div[@type='description']"/></xf:help>
            <xf:repeat nodeset="eac:source">
                <xf:label>
                    <xf:output value=" concat(
                        'Source ',
                        if(normalize-space(eac:reference)!='', eac:reference, ''), ' ')" />
                    <xf:trigger ref="self::eac:source[not(ancestor::eac:eac//@sourceReference[contains(., current()/@id)])]" class="del">
                        <xf:label>×</xf:label>
                        <xf:hint><xf:output value="concat('Supprimer ', string-join(eac:reference, ', '))" /></xf:hint>
                        <xf:delete if="count(parent::eac:sources/eac:source) > 1" nodeset="." ev:event="DOMActivate"/>
                        <xf:delete if="count(parent::eac:sources/eac:source) = 1" nodeset="parent::eac:sources" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-source']/tei:div[@type='summary']"/></xf:hint>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-source']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:reference">
                    <xf:input ref=".">
                        <xf:label>Référence</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-reference']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-reference']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <xf:input ref="@href">
                        <xf:label>Hyperlien</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-href']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-href']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <!--<xf:group class="trigger">
                        <xf:trigger ref="self::eac:reference[count(parent::eac:source/eac:reference) > 1][not(contains(/eac:eac//@sourceReference, current()/parent::eac:source/@id))]">
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-reference']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete  if="count(parent::eac:source/eac:reference) > 1" nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger ref="self::eac:reference[@href]">
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-href']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete nodeset="@href" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger ref="self::eac:reference[not(@href)]">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-href']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:insert context="." origin="instance('eacSources')/eac:sources/eac:source/eac:reference/@href" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>-->
                </xf:repeat>
                <!--<xf:trigger class="trigger">
                    <xf:label>Ajouter une référence</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:reference" at="last()" position="after"/>
                    </xf:action>
                    <xf:action ev:event="DOMActivate">
                        <xf:delete nodeset="eac:reference[last()]/@href"/>
                    </xf:action>
                    <!-/-<xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>-/->
                </xf:trigger>-->
                <xf:group ref="eac:citedRange">
                    <xf:input ref=".">
                        <xf:label>
                            Pagination/foliotation
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer la foliotation</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <xf:select1 ref="@unit">
                        <xf:label>Unité</xf:label>
                        <xf:item>
                            <xf:label>tome</xf:label>
                            <xf:value>tome</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>folio</xf:label>
                            <xf:value>folio</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>page</xf:label>
                            <xf:value>page</xf:value>
                        </xf:item>
                    </xf:select1>
                </xf:group>
                <!--<xf:repeat nodeset="eac:citedRange">
                    <xf:input ref=".">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='description']"/></xf:help>
                        <xf:hint><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='summary']"/></xf:hint>
                    </xf:input>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                </xf:repeat>-->
                <!--<xf:trigger class="trigger">
                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-citedRange']/tei:div[@type='fullName'])" /></xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert if="eac:citedRange" context="." nodeset="eac:citedRange" origin="instance('eacSources')/eac:sources/eac:source/eac:citedRange" at="last()" position="after"/>
                        <xf:insert if="not(eac:citedRange)" context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:citedRange" at="last()" position="after"/>
                    </xf:action>
                    <!-/-<xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>-/->
                </xf:trigger>-->
                <xf:trigger class="trigger" ref="self::eac:source[not(eac:citedRange)]">
                    <xf:label>Ajouter une pagination</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <!--<xf:insert if="eac:citedRange" context="." nodeset="eac:citedRange" origin="instance('eacSources')/eac:sources/eac:source/eac:citedRange" at="last()" position="after"/>-->
                        <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:citedRange" at="last()" position="after"/>
                    </xf:action>
                    <!--<xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>-->
                </xf:trigger>
                <xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value=" concat(
                        'Note ',
                        if(normalize-space(parent::eac:source/eac:reference)!='', concat(' (', parent::eac:source/eac:reference, ')'), ''), ' ')" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                                'Supprimer la note ',
                                 if(parent::eac:source/eac:reference!='', concat('(', parent::eac:source/eac:reference, ')'), ''))" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:repeat nodeset="eac:p">
                        <xf:label>
                            Paragraphe
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer un paragraphe</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un paragraphe</xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:source[not(eac:descriptiveNote)]" class="trigger">
                    <xf:label>
                        <xf:output value=" concat(
                        'Ajouter une note ',
                        if(normalize-space(eac:reference)!='', concat(' (', eac:reference, ')'), ''))" />
                    </xf:label>
                    <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" at="last()" position="after" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:repeat>
            <xf:trigger ref="self::eac:sources[eac:source]" class="trigger">
                <xf:label>Ajouter une nouvelle source</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:source" origin="instance('eacSources')/eac:sources/eac:source" at="last()" position="after"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:delete nodeset="eac:source[last()]/eac:descriptiveNote"/>
                    <xf:delete nodeset="eac:source[last()]/eac:citedRange"/>
                    <!--<xf:delete nodeset="eac:source[last()]/eac:reference/@href"/>-->
                    <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
                </xf:action>
            </xf:trigger>
            <xf:group ref="eac:descriptiveNote">
                <xf:label>
                    Notes générales sur les sources
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>Supprimer les notes générales sur les sources</xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:p">
                    <xf:label>
                        Paragraphe
                        <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>Supprimer un paragraphe</xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                    <xf:textarea ref="."/>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un paragraphe</xf:label>
                    <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:trigger ref="self::eac:sources[not(eac:descriptiveNote)]" class="trigger">
                <xf:label>Ajouter des notes générales sur les sources</xf:label>
                <xf:insert context="." nodeset="eac:source"  at="last()" position="after" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="identityPanel" selected="false">
        <xf:group ref="eac:cpfDescription/eac:identity">
            <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">Identité</xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-identity']/tei:div[@type='description']"/></xf:help>
            <xf:group ref="eac:entityType">
                <xf:select1 ref="@value" appearance="full">
                    <xf:label>Type d’entité</xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-entityType']/tei:div[@type='description']"/></xf:help>
                    <xf:item>
                        <xf:label>corporateBody</xf:label>
                        <xf:value>corporateBody</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>family</xf:label>
                        <xf:value>family</xf:value>
                    </xf:item>
                    <xf:item>
                        <xf:label>person</xf:label>
                        <xf:value>person</xf:value>
                    </xf:item>
                </xf:select1>
            </xf:group>
            <!--<xf:group ref="eac:otherEntityTypes">
                &lt;!&ndash;<xf:label>Répertoire</xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherEntityTypes']/tei:div[@type='description']"/></xf:help>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherEntityTypes']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger ref="self::eac:otherEntityTypes[not(eac:descriptiveNote)]">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:insert context="." nodeset="eac:otherEntityType" at="last()" position="after" origin="instance('eacIdentity')/eac:descriptiveNote" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>&ndash;&gt;
                <xf:group ref="eac:otherEntityType">
                    &lt;!&ndash;<xf:label>Répertoire</xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherEntityType']/tei:div[@type='description']"/></xf:help>&ndash;&gt;
                    <xf:select ref="." appearance="full">
                        <xf:label>Répertoire</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-term']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('otherEntityTypes')/type">
                            <xf:label ref="label"/>
                            <xf:copy ref="otherEntityType"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
                &lt;!&ndash;<xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value="concat(
                        instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName'],
                        ' (',
                        instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherEntityTypes']/tei:div[@type='fullName'],')')"/>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:repeat nodeset="eac:p">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                        <xf:group class="trigger">
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]">
                                <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>&ndash;&gt;
            </xf:group>-->
            <!--<xf:trigger ref="self::eac:identity[eac:nameEntry[not(eac:otherEntityTypes)]]" class="trigger">
                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-otherEntityTypes']/tei:div[@type='fullName'])" /></xf:label>
                <xf:insert context="." nodeset="eac:nameEntry" at="last()" position="after" origin="instance('eacIdentity')/eac:otherEntityTypes" ev:event="DOMActivate"/>
            </xf:trigger>-->
            <xf:repeat nodeset="eac:nameEntry">
                <xf:label>
                    <xf:output value="concat(
                            'Forme du nom ',
                            if(normalize-space(string-join(eac:part))!='', concat(' (', normalize-space(string-join(eac:part, ', ')), ')'), ''))"/>
                    <xf:trigger ref="self::eac:nameEntry[count(parent::eac:identity/eac:nameEntry) > 1]" class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="concat(
                            'Supprimer une forme du nom ',
                            if(normalize-space(string-join(eac:part))!='', concat(' (', normalize-space(string-join(eac:part, ', ')), ')'), ''))" />
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']"/></xf:help>
                <xf:group ref="self::eac:nameEntry">
                    <xf:select1 ref="@status">
                        <xf:label>Statut</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-status']/tei:div[@type='description']"/></xf:help>
                        <xf:item>
                            <xf:label>Autorisée</xf:label>
                            <xf:value>authorized</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Attestée</xf:label>
                            <xf:value>alternative</xf:value>
                        </xf:item>
                    </xf:select1>
                    <xf:select1 ref="@preferredForm" appearance="full">
                        <xf:label>Forme préférée</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-preferredForm']/tei:div[@type='description']"/></xf:help>
                        <xf:item>
                            <xf:label>Oui</xf:label>
                            <xf:value>true</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Non</xf:label>
                            <xf:value>false</xf:value>
                        </xf:item>
                        <xf:action if="current()='true'" ev:event="xforms-value-changed">
                            <xf:setvalue ref="ancestor::eac:nameEntry/following-sibling::eac:nameEntry/@preferredForm[.='true']" value="'false'"/>
                            <xf:setvalue ref="ancestor::eac:nameEntry/preceding-sibling::eac:nameEntry/@preferredForm[.='true']" value="'false'"/>
                        </xf:action>
                    </xf:select1>
                    <xf:repeat nodeset="eac:part">
                        <xf:input ref=".">
                            <xf:label>
                                Partie
                                <xf:trigger ref="self::eac:part[count(parent::eac:nameEntry/eac:part) > 1]" class="del">
                                    <xf:label>×</xf:label>
                                    <xf:hint>
                                        <xf:output value=" concat(
                                    'Supprimer une partie ',
                                    if(normalize-space(.)!='', concat(' (', ., ')'), ''))" />
                                    </xf:hint>
                                    <xf:delete nodeset="." if="count(parent::eac:nameEntry/eac:part) > 1" ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='description']"/></xf:help>
                        </xf:input>
                        <xf:select1 ref="@localType">
                            <xf:label>Type</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-localType']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('nameParts')/part">
                                <xf:label ref="."/>
                                <xf:value ref="."/>
                            </xf:itemset>
                        </xf:select1>
                    </xf:repeat>
                </xf:group>
                <xf:trigger ref="self::eac:nameEntry" class="trigger">
                    <xf:label>Ajouter une partie</xf:label>
                    <xf:insert context="." nodeset="eac:part" at="last()" position="after" origin="instance('eacIdentity')/eac:nameEntry/eac:part" ev:event="DOMActivate"/>
                </xf:trigger>
                <!--<xf:group ref="eac:useDates">
                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-useDates']/tei:div[@type='fullName']" /></xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-useDates']/tei:div[@type='description']" /></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-useDates']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:group ref="eac:date">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                        <xf:group class="trigger">
                            <xf:trigger>
                                <!-/-↺-/->
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:date" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:date" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    <!-/-@todo Q° multiple references inside one source !-/->
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:dateRange">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                        <xf:group class="trigger">
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:dateRange" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:dateRange" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <!-/-<xf:select1 ref="$useDatesChoice/useDates" incremental="true">
                      <xf:item>
                        <xf:label>Date</xf:label>
                        <xf:value>date</xf:value>
                        <xf:dispatch name="useDatesGroup-date" targetid="useDatesGroup" ev:event="xforms-select"/>
                      </xf:item>
                      <xf:item>
                        <xf:label>Date range</xf:label>
                        <xf:value>dateRange</xf:value>
                        <xf:dispatch name="useDatesGroup-dateRange" targetid="useDatesGroup" ev:event="xforms-select"/>
                      </xf:item>
                      <xf:item>
                        <xf:label>Date Set</xf:label>
                        <xf:value>dateSet</xf:value>
                        <xf:dispatch name="useDatesGroup-dateSet" targetid="useDatesGroup" ev:event="xforms-select"/>
                      </xf:item>
                    </xf:select1>-/->
                        <xf:group ref="eac:fromDate">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:fromDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        <!-/-@todo Q° multiple references inside one source !-/->
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                        </xf:group>
                        <xf:group ref="eac:toDate">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:toDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        <!-/-@todo Q° multiple references inside one source !-/->
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:dateSet">
                        <xf:label class="{if(is-valid(.), 'valid', 'invalid')}"><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                        <xf:group class="trigger">
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:dateSet" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:useDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                    <xf:insert context="parent::eac:useDates/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:useDates/eac:dateSet" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <xf:repeat nodeset="*" id="useDates-dateSet">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]">
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:group ref="self::eac:date">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        <!-/-@todo Q° multiple references inside one source !-/->
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                            <xf:group ref="self::eac:dateRange">
                                <xf:group ref="eac:fromDate">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                    <xf:group ref="self::eac:fromDate">
                                        <xf:input ref="@standardDate" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notBefore" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notAfter" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:select1 ref="@certainty" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                            <xf:item>
                                                <xf:label>Certain</xf:label>
                                                <xf:value>certain</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Approximate</xf:label>
                                                <xf:value>approximate</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Uncertain</xf:label>
                                                <xf:value>uncertain</xf:value>
                                            </xf:item>
                                        </xf:select1>
                                        <xf:select ref="@sourceReference" appearance="full">
                                            <xf:label>
                                                <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                            </xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                <!-/-@todo Q° multiple references inside one source !-/->
                                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                <xf:value value="concat('#', @id)"/>
                                            </xf:itemset>
                                        </xf:select>
                                    </xf:group>
                                </xf:group>
                                <xf:group ref="eac:toDate">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                    <xf:group ref="self::eac:toDate">
                                        <xf:input ref="@standardDate" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notBefore" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notAfter" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:select1 ref="@certainty" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                            <xf:item>
                                                <xf:label>Certain</xf:label>
                                                <xf:value>certain</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Approximate</xf:label>
                                                <xf:value>approximate</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Uncertain</xf:label>
                                                <xf:value>uncertain</xf:value>
                                            </xf:item>
                                        </xf:select1>
                                        <xf:select ref="@sourceReference" appearance="full">
                                            <xf:label>
                                                <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                            </xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                <!-/-@todo Q° multiple references inside one source !-/->
                                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                <xf:value value="concat('#', @id)"/>
                                            </xf:itemset>
                                        </xf:select>
                                    </xf:group>
                                </xf:group>
                            </xf:group>
                        </xf:repeat>
                        <xf:trigger class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                            <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                            <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                </xf:group>-->
                <!--<xf:trigger ref="self::eac:nameEntry[not(eac:useDates)]" class="trigger">
                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-useDates']/tei:div[@type='fullName'])" /></xf:label>
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:useDates" ev:event="DOMActivate"/>
                    <xf:insert context="eac:useDates" nodeset="node()" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>-->
                <xf:select ref="@sourceReference" appearance="full">
                    <xf:label>
                        <xf:output value="concat(
                        'Référence(s)',
                        if(normalize-space(string-join(parent::eac:nameEntry/eac:part))!='', concat(' (', normalize-space(string-join(parent::eac:nameEntry/eac:part, ', ')), ')') , '')
                        )"/>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                        <!--@todo Q° multiple references inside one source !-->
                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                        <xf:value value="concat('#', @id)"/>
                    </xf:itemset>
                </xf:select>
            </xf:repeat>
            <xf:trigger class="trigger">
                <xf:label>Ajouter une forme du nom</xf:label>
                <xf:insert if="self::eac:identity[eac:nameEntry]" context="." nodeset="*[name(.)='nameEntry']" at="last()" position="after" origin="instance('eacIdentity')/eac:nameEntry" ev:event="DOMActivate"/>
                <xf:insert if="self::eac:identity[not(eac:nameEntry)]" context="." nodeset="eac:entityType" position="after" origin="instance('eacIdentity')/eac:nameEntry" ev:event="DOMActivate"/>
            </xf:trigger>
            <!--<xf:repeat nodeset="eac:identityId">
                <xf:group ref=".">
                    <xf:input ref=".">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-identityId']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-identityId']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <xf:input ref="@target">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-target']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-target']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                </xf:group>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-identityId']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
            </xf:repeat>
            <xf:trigger ref="self::eac:identity[eac:nameEntry]" class="trigger">
                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-identityId']/tei:div[@type='fullName'])" /></xf:label>
                <xf:insert if="self::eac:identity[eac:descriptiveNote]" context="." nodeset="eac:descriptiveNote" at="1" position="before" origin="instance('eacIdentity')/eac:identityId" ev:event="DOMActivate"/>
                <xf:insert if="self::eac:identity[not(eac:descriptiveNote)]" context="." nodeset="*" at="last()" position="after" origin="instance('eacIdentity')/eac:identityId" ev:event="DOMActivate"/>
            </xf:trigger>-->
            <xf:group ref="eac:descriptiveNote">
                <xf:label>
                    Notes
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>Supprimer les notes</xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:p">
                    <xf:label>
                        Paragraphe
                        <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>Supprimer un paragraphe</xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                    <xf:textarea ref="."/>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un paragraphe</xf:label>
                    <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:trigger ref="self::eac:identity[eac:nameEntry][not(eac:descriptiveNote)]" class="trigger">
                <xf:label>Ajouter des notes</xf:label>
                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacIdentity')/eac:descriptiveNote" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="functionsPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:description)]">
                <xf:label>Ajouter des fonctions</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:identity" position="after" origin="instance('eacDescription')/eac:description"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*" at="1" position="before" origin="instance('eacFunctions')/eac:functions"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:functions/eac:function/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:functions/eac:function/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:trigger ref="eac:cpfDescription[eac:description[not(eac:functions)]]">
                <xf:label>Ajouter des fonctions</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*" at="1" position="before" origin="instance('eacFunctions')/eac:functions"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:functions/eac:function/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:functions/eac:function/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:description/eac:functions">
            <xf:label>
                Fonctions
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>Supprimer toutes les fonctions</xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-functions']/tei:div[@type='description']"/></xf:help>
            <xf:repeat nodeset="eac:function">
                <xf:label>
                    <xf:output value="concat('Fonction', if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                    <xf:trigger ref="self::eac:function[count(parent::eac:functions/eac:function)>1]" class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="concat(
                            'Supprimer une fonction',
                            if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-function']/tei:div[@type='description']"/></xf:help>
                <xf:group>
                    <xf:input ref="eac:term">
                        <xf:label>Terme</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-term']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <xf:select ref="@localType" appearance="full" class="switch">
                        <!--<xf:label>Function vérifiée</xf:label>-->
                        <xf:item>
                            <xf:label>Function vérifiée</xf:label>
                            <xf:value>verified</xf:value>
                        </xf:item>
                    </xf:select>
                </xf:group>
                <xf:group ref="self::eac:function">
                    <xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                        'Référence(s)',
                        if(normalize-space(string-join(parent::eac:function/eac:term))!='', concat(' (', normalize-space(string-join(parent::eac:function/eac:term, ', ')), ')') , '')
                        )"/>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!--@todo Q° multiple references inside one source !-->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
                <xf:group ref="eac:date">
                    <xf:label>
                        <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <!--↺-->
                            <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:function/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:function/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                <xf:setvalue ref="parent::eac:function/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                                <xf:setvalue ref="parent::eac:function/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                                <xf:setvalue ref="parent::eac:function/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                                <xf:setvalue ref="parent::eac:function/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:function/eac:dateSet" nodeset="*" origin="parent::eac:function/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <!--<xf:select ref="@sourceReference" appearance="full">
                            <xf:label>
                                <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>-->
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:function[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>Dater (date simple)</xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateRange">
                    <xf:label>
                        <xf:output value="'Intervalle'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un intervalle'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:function/eac:dateSet" nodeset="*" origin="parent::eac:function/eac:dateRange"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="eac:fromDate">
                        <xf:label>Date de début</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:fromDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:toDate">
                        <xf:label>Date de fin</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:toDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:function[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (intervalle)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateSet">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="'Ensemble de dates'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un ensemble de dates'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:function" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:function/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:function/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:function/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                    <xf:repeat nodeset="self::eac:dateSet/*">
                        <xf:label>
                            <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                            <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                        <xf:group ref="self::eac:dateRange">
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter une date à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:function[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (ensemble de dates)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:placeName">
                    <xf:input ref=".">
                        <xf:label>
                            <xf:output value="concat(
                                    'Lieu',
                                    if(normalize-space(.)!='', concat(' (', ., ')'), ''))"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat(
                                    'Supprimer un lieu',
                                    if(normalize-space(.)!='', concat(' (', ., ')'), ''))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <!--<xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                            instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                            ' (',
                            instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='fullName'],
                            ')')" />
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!-/-@todo Q° multiple references inside one source !-/->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>-->
                </xf:group>
                <xf:trigger ref="self::eac:function[not(eac:placeName)]" class="trigger">
                    <xf:label>Ajouter un lieu</xf:label>
                    <xf:insert if="eac:descriptiveNote" context="." nodeset="eac:descriptiveNote" position="before" origin="instance('eacFunctions')/eac:functions/eac:function/eac:placeName" ev:event="DOMActivate"/>
                    <xf:insert if="not(eac:descriptiveNote)" context="." nodeset="*" at="last()" position="after" origin="instance('eacFunctions')/eac:functions/eac:function/eac:placeName" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value="'Note'" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer la note'" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:repeat nodeset="eac:p">
                        <xf:label>
                            Paragraphe
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer un paragraphe</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un paragraphe</xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:function[not(eac:descriptiveNote)]" class="trigger">
                    <xf:label>
                        <xf:output value="concat(
                        'Ajouter une note',
                        if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                    </xf:label>
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacFunctions')/eac:functions/eac:function/eac:descriptiveNote" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:repeat>
            <xf:trigger class="trigger">
                <xf:label>Ajouter une fonction</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:function" at="last()" position="after" origin="instance('eacFunctions')/eac:functions/eac:function"/>
                </xf:action>
                <xf:delete nodeset="eac:function[last()]/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:function[last()]/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="occupationsPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:description)]">
                <xf:label>Ajouter des professions</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:identity" position="after" origin="instance('eacDescription')/eac:description"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*[self::eac:functions or self::eac:languagesUsed or self::eac:legalStatuses or self::eac:localDescriptions or self::eac:mandates]" at="last()" position="after" origin="instance('eacOccupations')/eac:occupations"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:occupations/eac:occupation/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:occupations/eac:occupation/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:trigger ref="eac:cpfDescription[eac:description[not(eac:occupations)]]">
                <xf:label>Ajouter des professions</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*[self::eac:functions or self::eac:languagesUsed or self::eac:legalStatuses or self::eac:localDescriptions or self::eac:mandates]" at="last()" position="after" origin="instance('eacOccupations')/eac:occupations"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:occupations/eac:occupation/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:occupations/eac:occupation/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:description/eac:occupations">
            <xf:label>
                Professions
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>Supprimer toutes les professions</xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-occupations']/tei:div[@type='description']"/></xf:help>
            <xf:repeat nodeset="eac:occupation">
                <xf:label>
                    <xf:output value="concat('Profession', if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                    <xf:trigger ref="self::eac:occupation[count(parent::eac:occupations/eac:occupation)>1]" class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="concat(
                            'Supprimer une profession',
                            if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-occupation']/tei:div[@type='description']"/></xf:help>
                <xf:group>
                    <xf:input ref="eac:term">
                        <xf:label>Terme</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-term']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <xf:select ref="@localType" appearance="full" class="switch">
                        <!--<xf:label>Function vérifiée</xf:label>-->
                        <xf:item>
                            <xf:label>Function vérifiée</xf:label>
                            <xf:value>verified</xf:value>
                        </xf:item>
                    </xf:select>
                </xf:group>
                <xf:group ref="self::eac:occupation">
                    <xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                        'Référence(s)',
                        if(normalize-space(string-join(parent::eac:occupation/eac:term))!='', concat(' (', normalize-space(string-join(parent::eac:occupation/eac:term, ', ')), ')') , '')
                        )"/>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!--@todo Q° multiple references inside one source !-->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
                <xf:group ref="eac:date">
                    <xf:label>
                        <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <!--↺-->
                            <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:occupation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:occupation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                <xf:setvalue ref="parent::eac:occupation/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                                <xf:setvalue ref="parent::eac:occupation/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                                <xf:setvalue ref="parent::eac:occupation/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                                <xf:setvalue ref="parent::eac:occupation/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:occupation/eac:dateSet" nodeset="*" origin="parent::eac:occupation/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <!--<xf:select ref="@sourceReference" appearance="full">
                            <xf:label>
                                <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>-->
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:occupation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>Dater (date simple)</xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateRange">
                    <xf:label>
                        <xf:output value="'Intervalle'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un intervalle'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:occupation/eac:dateSet" nodeset="*" origin="parent::eac:occupation/eac:dateRange"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="eac:fromDate">
                        <xf:label>Date de début</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:fromDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:toDate">
                        <xf:label>Date de fin</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:toDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:occupation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (intervalle)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateSet">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="'Ensemble de dates'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un ensemble de dates'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:occupation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:occupation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:occupation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:occupation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                    <xf:repeat nodeset="self::eac:dateSet/*">
                        <xf:label>
                            <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                            <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                        <xf:group ref="self::eac:dateRange">
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter une date à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:occupation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (ensemble de dates)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:placeName">
                    <xf:input ref=".">
                        <xf:label>
                            <xf:output value="concat(
                                    'Lieu',
                                    if(normalize-space(.)!='', concat(' (', ., ')'), ''))"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat(
                                    'Supprimer un lieu',
                                    if(normalize-space(.)!='', concat(' (', ., ')'), ''))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <!--<xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                            instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                            ' (',
                            instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='fullName'],
                            ')')" />
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!-/-@todo Q° multiple references inside one source !-/->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>-->
                </xf:group>
                <xf:trigger ref="self::eac:occupation[not(eac:placeName)]" class="trigger">
                    <xf:label>Ajouter un lieu</xf:label>
                    <xf:insert if="eac:descriptiveNote" context="." nodeset="eac:descriptiveNote" position="before" origin="instance('eacOccupations')/eac:occupations/eac:occupation/eac:placeName" ev:event="DOMActivate"/>
                    <xf:insert if="not(eac:descriptiveNote)" context="." nodeset="*" at="last()" position="after" origin="instance('eacOccupations')/eac:occupations/eac:occupation/eac:placeName" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value="'Note'" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer la note'" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:repeat nodeset="eac:p">
                        <xf:label>
                            Paragraphe
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer un paragraphe</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un paragraphe</xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:occupation[not(eac:descriptiveNote)]" class="trigger">
                    <xf:label>
                        <xf:output value="concat(
                        'Ajouter une note',
                        if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                    </xf:label>
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacOccupations')/eac:occupations/eac:occupation/eac:descriptiveNote" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:repeat>
            <xf:trigger class="trigger">
                <xf:label>Ajouter une Profession</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:occupation" at="last()" position="after" origin="instance('eacOccupations')/eac:occupations/eac:occupation"/>
                </xf:action>
                <xf:delete nodeset="eac:occupation[last()]/eac:descriptiveNote" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:occupation[last()]/eac:placeName" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="placesPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:description)]">
                <xf:label>Ajouter des lieux</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:identity" position="after" origin="instance('eacDescription')/eac:description"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:insert if="eac:description[not(eac:functions)]" context="eac:description" nodeset="*" at="1" position="before" origin="instance('eacPlaces')/eac:places"/>
                    <xf:insert if="eac:description[eac:functions]" context="eac:description" nodeset="eac:functions" position="after" origin="instance('eacPlaces')/eac:places"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:places/eac:descriptiveNote" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:trigger ref="eac:cpfDescription[eac:description[not(eac:places)]]">
                <xf:label>Ajouter des lieux</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert if="eac:description[not(eac:functions)]" context="eac:description" nodeset="*" at="1" position="before" origin="instance('eacPlaces')/eac:places"/>
                    <xf:insert if="eac:description[eac:functions]" context="eac:description" nodeset="eac:functions" position="after" origin="instance('eacPlaces')/eac:places"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:places/eac:descriptiveNote" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:description/eac:places">
            <xf:label>
                <xf:output value="'Lieux '" />
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>
                        <xf:output value="'Supprimer les lieux '" /></xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-places']/tei:div[@type='description']"/></xf:help>
            <xf:repeat nodeset="eac:place">
                <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                    <xf:output value="'Lieu'" />
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer un lieu '" /></xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-place']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:placeRole">
                    <xf:input ref=".">
                        <xf:label>
                            <xf:output value="'Rôle du lieu'" />
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer un rôle'" /></xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeRole']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un rôle pour le lieu</xf:label>
                    <xf:insert if="self::eac:place[eac:placeRole]" context="." nodeset="eac:placeRole" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeRole" ev:event="DOMActivate"/>
                    <xf:insert if="self::eac:place[not(eac:placeRole)]" context="." nodeset="*" at="1" position="before" origin="instance('eacPlace')/eac:place/eac:placeRole" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:repeat nodeset="eac:placeName">
                    <xf:input ref=".">
                        <xf:label>
                            <xf:output value="'Nom du lieu'" />
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer le nom du lieu'" /></xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un nom de lieu</xf:label>
                    <xf:insert if="self::eac:place[eac:placeName]" context="." nodeset="eac:placeName" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                    <xf:insert if="self::eac:place[not(eac:placeName)][eac:placeRole]" context="." nodeset="eac:placeRole" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                    <xf:insert if="self::eac:place[not(eac:placeName)][not(eac:placeRole)]" context="." nodeset="*" position="before" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:repeat nodeset="eac:address">
                    <xf:label>
                        <xf:output value="'Adresse'" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer une adresse'" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-address']/tei:div[@type='description']"/></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="'Ajouter une ligne d’adresse'"/></xf:label>
                            <xf:insert context="." nodeset="eac:addressLine" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address/eac:addressLine" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:repeat nodeset="eac:addressLine">
                        <xf:input ref=".">
                            <xf:label>
                                <xf:output value="'Ligne d’adresse'" />
                                <xf:trigger class="del">
                                    <xf:label>×</xf:label>
                                    <xf:hint>
                                        <xf:output value="'Supprimer une ligne d’adresse'" /></xf:hint>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-addressLine']/tei:div[@type='description']"/></xf:help>
                        </xf:input>
                    </xf:repeat>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label><xf:output value="'Ajouter une adresse'"/></xf:label>
                    <xf:insert if="self::eac:place[eac:address]" context="." nodeset="eac:address" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                    <xf:insert if="self::eac:place[eac:placeName or eac:placeRole][not(eac:address)]" context="." nodeset="*[self::eac:placeName or self::eac:placeRole]" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                    <xf:insert if="self::eac:place[not(eac:placeName)][not(eac:placeRole)][not(eac:address)]" context="." nodeset="*" position="before" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:date">
                    <xf:label>
                        <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <!--↺-->
                            <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                <xf:setvalue ref="parent::eac:place/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                                <xf:setvalue ref="parent::eac:place/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                                <xf:setvalue ref="parent::eac:place/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                                <xf:setvalue ref="parent::eac:place/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:place/eac:dateSet" nodeset="*" origin="parent::eac:place/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <!--<xf:select ref="@sourceReference" appearance="full">
                            <xf:label>
                                <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>-->
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:place[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>Dater (date simple)</xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateRange">
                    <xf:label>
                        <xf:output value="'Intervalle'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un intervalle'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:place/eac:dateSet" nodeset="*" origin="parent::eac:place/eac:dateRange"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="eac:fromDate">
                        <xf:label>Date de début</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:fromDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:toDate">
                        <xf:label>Date de fin</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:toDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:place[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (intervalle)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateSet">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="'Ensemble de dates'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un ensemble de dates'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:place/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                    <xf:repeat nodeset="self::eac:dateSet/*">
                        <xf:label>
                            <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                            <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                        <xf:group ref="self::eac:dateRange">
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter une date à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:place[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (ensemble de dates)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value="'Note'" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer la note'" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:repeat nodeset="eac:p">
                        <xf:label>
                            Paragraphe
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer un paragraphe</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un paragraphe</xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:place[not(eac:descriptiveNote)]" class="trigger">
                    <xf:label>
                        <xf:output value="'Ajouter une note '" />
                    </xf:label>
                    <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" at="last()" position="after" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="self::eac:place">
                    <xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                            instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                            ' (',
                            instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-place']/tei:div[@type='fullName'],
                            ')')" />
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!--@todo Q° multiple references inside one source !-->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
            </xf:repeat>
            <xf:trigger class="trigger">
                <xf:label><xf:output value="'Ajouter un lieu'"/></xf:label>
                <xf:insert context="." nodeset="eac:place" at="last()" position="after" origin="instance('eacPlaces')/eac:places/eac:place" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:group ref="eac:descriptiveNote">
                <xf:label>
                    <xf:output value="'Note sur les lieux'" />
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer la note'" /></xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:p">
                    <xf:label>
                        Paragraphe
                        <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>Supprimer un paragraphe</xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                    <xf:textarea ref="."/>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un paragraphe</xf:label>
                    <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:trigger ref="self::eac:places[not(eac:descriptiveNote)]" class="trigger">
                <xf:label>
                    <xf:output value="'Ajouter une note sur les lieux'" />
                </xf:label>
                <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" at="last()" position="after" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="existDatesPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:description)]">
                <xf:label>Ajouter des dates d'existence</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:identity" position="after" origin="instance('eacDescription')/eac:description"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:existDates"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger ref="eac:cpfDescription[eac:description[not(eac:existDates)]]">
                <xf:label>Ajouter des dates d'existence</xf:label>
                <xf:insert context="eac:description" nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:existDates" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:description/eac:existDates">
            <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                Dates d'existence
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-existDates']/tei:div[@type='description']"/></xf:help>
            <xf:group ref="eac:date">
                <xf:label>
                    <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger>
                        <!--↺-->
                        <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                            <xf:insert context="parent::eac:existDates/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                            <xf:insert context="parent::eac:existDates/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            <xf:setvalue ref="parent::eac:existDates/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                            <xf:setvalue ref="parent::eac:existDates/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                            <xf:setvalue ref="parent::eac:existDates/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                            <xf:setvalue ref="parent::eac:existDates/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger>
                        <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                            <xf:insert context="parent::eac:existDates/eac:dateSet" nodeset="*" origin="parent::eac:existDates/eac:date"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                <xf:group ref="self::eac:date">
                    <xf:input ref="@standardDate" incremental="true">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                    </xf:input>
                    <xf:input ref="@notBefore" incremental="true">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                    </xf:input>
                    <xf:input ref="@notAfter" incremental="true">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                    </xf:input>
                    <xf:select1 ref="@certainty" incremental="true">
                        <xf:label>Certitude</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                        <xf:item>
                            <xf:label>Certain</xf:label>
                            <xf:value>certain</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Approximate</xf:label>
                            <xf:value>approximate</xf:value>
                        </xf:item>
                        <xf:item>
                            <xf:label>Uncertain</xf:label>
                            <xf:value>uncertain</xf:value>
                        </xf:item>
                    </xf:select1>
                    <xf:select ref="@sourceReference" appearance="full">
                        <xf:label>Référence(s)</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
            </xf:group>
            <xf:trigger ref="self::eac:existDates[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                <xf:label>Dater (date simple)</xf:label>
                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:group ref="eac:dateRange">
                <xf:label>
                    <xf:output value="'Intervalle'"/>
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer un intervalle'"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                    <!--<xf:trigger>
                        <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:dateRange" ev:event="DOMActivate"/>
                    </xf:trigger>-->
                    <xf:trigger>
                        <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                            <xf:insert context="parent::eac:existDates/eac:dateSet" nodeset="*" origin="parent::eac:existDates/eac:dateRange"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:dateRange" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                <xf:group ref="eac:fromDate">
                    <xf:label>Date de début</xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:fromDate">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <xf:select ref="@sourceReference" appearance="full">
                            <xf:label>Référence(s)</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>
                    </xf:group>
                </xf:group>
                <xf:group ref="eac:toDate">
                    <xf:label>Date de fin</xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:toDate">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <xf:select ref="@sourceReference" appearance="full">
                            <xf:label>Référence(s)</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>
                    </xf:group>
                </xf:group>
            </xf:group>
            <xf:trigger ref="self::eac:existDates[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                <xf:label>Dater (intervalle)</xf:label>
                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:group ref="eac:dateSet">
                <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                    <xf:output value="'Ensemble de dates'"/>
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer un ensemble de dates'"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                    <!--<xf:trigger>
                        <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:dateSet" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger>
                        <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert context="parent::eac:existDates" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                            <xf:insert context="parent::eac:existDates/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                            <xf:insert context="parent::eac:existDates/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                        </xf:action>
                        <xf:delete nodeset="parent::eac:existDates/eac:dateSet" ev:event="DOMActivate"/>
                    </xf:trigger>-->
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                <xf:repeat nodeset="self::eac:dateSet/*">
                    <xf:label>
                        <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                        <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <xf:select ref="@sourceReference" appearance="full">
                            <xf:label>Référence(s)</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>
                    </xf:group>
                    <xf:group ref="self::eac:dateRange">
                        <xf:group ref="eac:fromDate">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:fromDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>Référence(s)</xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                        </xf:group>
                        <xf:group ref="eac:toDate">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:toDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>Référence(s)</xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                        </xf:group>
                    </xf:group>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter une date à l'ensemble</xf:label>
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:trigger ref="self::eac:existDates[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                <xf:label>Dater (ensemble de dates)</xf:label>
                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:group ref="eac:descriptiveNote">
                <xf:label>
                    <xf:output value="'Note'" />
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer la note'" /></xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:p">
                    <xf:label>
                        Paragraphe
                        <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>Supprimer un paragraphe</xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                    <xf:textarea ref="."/>
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un paragraphe</xf:label>
                    <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:trigger ref="self::eac:existDates[not(eac:descriptiveNote)]" class="trigger">
                <xf:label>
                    <xf:output value="concat(
                        'Ajouter une note',
                        if(normalize-space(eac:term)!='', concat(' (', eac:term, ')'), ''))"/>
                </xf:label>
                <xf:insert context="." nodeset="*"  at="last()" position="after" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="biogHistPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:description)]">
                <xf:label>Ajouter une biographie</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="eac:identity" position="after" origin="instance('eacDescription')/eac:description"/>
                </xf:action>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*" at="last()" position="after" origin="instance('eacBiogHist')/eac:biogHist"/>
                </xf:action>
                <!--<xf:delete nodeset="eac:description/eac:biogHist/node()" ev:event="DOMActivate"/>-->
                <xf:delete nodeset="eac:description/eac:biogHist/eac:head" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:biogHist/eac:abstract" ev:event="DOMActivate"/>
                <xf:action ev:event="DOMActivate">
                    <!--@todo generate-id() with BaseX-->
                    <xf:dispatch name="getid" targetid="entity"/>
                </xf:action>
            </xf:trigger>
            <xf:trigger ref="eac:cpfDescription[eac:description[not(eac:biogHist)]]">
                <xf:label>Ajouter une biographie</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:description" nodeset="*" at="last()" position="after" origin="instance('eacBiogHist')/eac:biogHist"/>
                </xf:action>
                <xf:delete nodeset="eac:description/eac:biogHist/eac:head" ev:event="DOMActivate"/>
                <xf:delete nodeset="eac:description/eac:biogHist/eac:abstract" ev:event="DOMActivate"/>
                <xf:action ev:event="DOMActivate">
                    <!--@todo generate-id() with BaseX-->
                    <xf:dispatch name="getid" targetid="entity"/>
                </xf:action>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:description/eac:biogHist">
            <xf:label>
                Biographie
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>
                        <xf:output value="'Supprimer la biographie'" /></xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-biogHist']/tei:div[@type='description']"/></xf:help>
            <!--<xf:group ref="eac:head">
                <xf:input ref=".">
                    <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-head']/tei:div[@type='fullName']"/>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-head']/tei:div[@type='description']"/></xf:help>
                </xf:input>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-head']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
            </xf:group>
            <xf:trigger ref="self::eac:biogHist[not(eac:head)]" class="trigger">
                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-head']/tei:div[@type='fullName'])"/></xf:label>
                <xf:insert context="." nodeset="*" position="before" origin="instance('eacBiogHist')/eac:biogHist/eac:head" ev:event="DOMActivate"/>
            </xf:trigger>
            <xf:group ref="eac:abstract">
                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-abstract']/tei:div[@type='fullName']"/>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-head']/tei:div[@type='description']"/></xf:help>
                <xf:textarea ref="."/>
                <xf:group class="trigger">
                    <xf:trigger>
                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-abstract']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
            </xf:group>
            <xf:trigger ref="self::eac:biogHist[not(eac:abstract)]" class="trigger">
                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-abstract']/tei:div[@type='fullName'])"/></xf:label>
                <xf:insert if="self::eac:biogHist[not(eac:head)]" context="." nodeset="*" position="before" origin="instance('eacBiogHist')/eac:biogHist/eac:abstract" ev:event="DOMActivate"/>
                <xf:insert if="self::eac:biogHist[eac:head]" context="." nodeset="eac:head" position="after" origin="instance('eacBiogHist')/eac:biogHist/eac:abstract" ev:event="DOMActivate"/>
            </xf:trigger>-->
            <xf:repeat nodeset="eac:chronList">
                <xf:label>
                    Liste chronologique
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer la liste chronologique'" /></xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-chronList']/tei:div[@type='description']"/></xf:help>
                <xf:repeat nodeset="eac:chronItem">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="concat(
                        'Évènement ',
                        if(normalize-space(eac:event)!='', concat(' (', eac:event, ')'), ''), ' ')" />
                        <xf:trigger ref="self::eac:chronItem[not(ancestor::eac:eac//@target[contains(., current()/@id)])]" class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                                'Supprimer l’évènement ',
                                 if(eac:event!='', concat('(', eac:event, ')'), ''))" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-chronItem']/tei:div[@type='description']"/></xf:help>
                    <xf:trigger ref="self::eac:chronItem[not(eac:event)][not(eac:chronItemSet)]" class="trigger">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-event']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert if="self::eac:chronItem[eac:date or eac:dateRange or eac:dateSet]" context="." nodeset="*[self::eac:date or self::eac:dateRange or self::eac:dateSet]" at="1" position="after" origin="instance('eacChronItem')/eac:chronItem/eac:event" ev:event="DOMActivate"/>
                        <xf:insert if="self::eac:chronItem[not(eac:date or eac:dateRange or eac:dateSet)]" context="." nodeset="*" at="1" position="before" origin="instance('eacChronItem')/eac:chronItem/eac:event" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:group ref=".">
                        <xf:input ref="eac:event">
                            <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-event']/tei:div[@type='fullName']"/>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-event']/tei:div[@type='description']"/></xf:help>
                        </xf:input>
                        <xf:select1 ref="@localType">
                            <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-localType']/tei:div[@type='fullName']"/>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-localType']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eventTypes')/event">
                                <xf:label ref="label"/>
                                <xf:value ref="value"/>
                            </xf:itemset>
                            <xf:action ev:event="xforms-value-changed">
                                <xf:show if=".='reception'" dialog="eventReception"/>
                            </xf:action>
                            <xf:action if=".='reception'" ev:event="xforms-deselect">
                                <xf:show dialog="test"/>
                            </xf:action>
                        </xf:select1>
                        <xf:dialog id="test">
                            <xf:trigger>
                                <xf:label>Réinitialiser le champ date</xf:label>
                                <xf:delete nodeset="eac:date" ev:event="DOMActivate"/>
                                <xf:delete nodeset="eac:dateSet" ev:event="DOMActivate"/>
                                <xf:delete nodeset="eac:dateRange" ev:event="DOMActivate"/>
                                <xf:insert context="." nodeset="eac:event" position="before" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                                <xf:hide ev:event="DOMActivate" dialog="test"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label>Annuler</xf:label>
                                <xf:hide ev:event="DOMActivate" dialog="test"/>
                            </xf:trigger>
                        </xf:dialog>
                        <xf:dialog id="eventReception">
                            <xf:trigger>
                                <xf:label>Préformater l'évènement</xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:delete nodeset="eac:date" ev:event="DOMActivate"/>
                                    <xf:delete nodeset="eac:dateRange" ev:event="DOMActivate"/>
                                    <xf:delete nodeset="eac:dateSet" ev:event="DOMActivate"/>
                                    <xf:insert context="." nodeset="eac:event" position="before" origin="instance('eacDates')/eac:dateSet"/>
                                    <xf:action while="eac:dateSet[count(*) &lt; 8]">
                                        <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 1" ref="eac:dateSet/eac:date[last()]" value="'Lettres de provision'"/>
                                        <!--<xf:setvalue if="count(eac:dateSet/*) = 2" ref="eac:dateSet/eac:date[last()]" value="'Lettres de surannation'"/>-->
                                        <xf:setvalue if="count(eac:dateSet/*) = 2" ref="eac:dateSet/eac:date[last()]" value="'Supplique'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 3" ref="eac:dateSet/eac:date[last()]" value="'Ordonnance de soit montré au procureur du roy'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 4" ref="eac:dateSet/eac:date[last()]" value="'Examen'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 5" ref="eac:dateSet/eac:date[last()]" value="'Consentement de la communauté'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 6" ref="eac:dateSet/eac:date[last()]" value="'Information de vie et de mœurs'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 7" ref="eac:dateSet/eac:date[last()]" value="'Serment'"/>
                                        <xf:setvalue if="count(eac:dateSet/*) = 8" ref="eac:dateSet/eac:date[last()]" value="'Réception'"/>
                                    </xf:action>
                                    <xf:hide dialog="eventReception"/>
                                </xf:action>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label>Annuler</xf:label>
                                <xf:hide ev:event="DOMActivate" dialog="eventReception"/>
                            </xf:trigger>
                        </xf:dialog>
                        <xf:select ref="@sourceReference" appearance="full">
                            <xf:label>Référence(s)</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                <!--@todo Q° multiple references inside one source !-->
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>
                    </xf:group>
                    <xf:group ref="eac:date">
                        <xf:label>
                            <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <!--↺-->
                                <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                    <xf:setvalue ref="parent::eac:chronItem/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                                    <xf:setvalue ref="parent::eac:chronItem/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                                    <xf:setvalue ref="parent::eac:chronItem/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                                    <xf:setvalue ref="parent::eac:chronItem/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:date" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateSet" nodeset="*" origin="parent::eac:chronItem/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:date" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                        instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                        ' (',
                                        instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                        ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                    <xf:trigger ref="self::eac:chronItem[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                        <xf:label>Dater (date simple)</xf:label>
                        <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:group ref="eac:dateRange">
                        <xf:label>
                            <xf:output value="'Intervalle'"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer un intervalle'"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                            <!--<xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:dateRange" ev:event="DOMActivate"/>
                            </xf:trigger>-->
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateSet" nodeset="*" origin="parent::eac:chronItem/eac:dateRange"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:dateRange" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="eac:fromDate">
                            <xf:label>Date de début</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:fromDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label>Certitude</xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <!--<xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>-->
                            </xf:group>
                        </xf:group>
                        <xf:group ref="eac:toDate">
                            <xf:label>Date de fin</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:toDate">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label>Certitude</xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <!--<xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>-->
                            </xf:group>
                        </xf:group>
                    </xf:group>
                    <xf:trigger ref="self::eac:chronItem[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                        <xf:label>
                            Dater (intervalle)
                        </xf:label>
                        <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:group ref="eac:dateSet">
                        <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                            <xf:output value="'Ensemble de dates'"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer un ensemble de dates'"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                            <!--<xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:dateSet" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger>
                                <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert context="parent::eac:chronItem" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                    <xf:insert context="parent::eac:chronItem/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                </xf:action>
                                <xf:delete nodeset="parent::eac:chronItem/eac:dateSet" ev:event="DOMActivate"/>
                            </xf:trigger>-->
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                        <xf:repeat nodeset="self::eac:dateSet/*">
                            <xf:label>
                                <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                                <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                                    <xf:label>×</xf:label>
                                    <xf:hint>
                                        <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                                    </xf:hint>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                            <xf:group ref="self::eac:date">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:input ref="." incremental="true">
                                    <xf:label>Intitulé</xf:label>
                                </xf:input>
                                <!--<xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(
                                        instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                        ' (',
                                        instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                        ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>-->
                            </xf:group>
                            <xf:group ref="self::eac:dateRange">
                                <xf:group ref="eac:fromDate">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                    <xf:group ref="self::eac:fromDate">
                                        <xf:input ref="@standardDate" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notBefore" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notAfter" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:select1 ref="@certainty" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                            <xf:item>
                                                <xf:label>Certain</xf:label>
                                                <xf:value>certain</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Approximate</xf:label>
                                                <xf:value>approximate</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Uncertain</xf:label>
                                                <xf:value>uncertain</xf:value>
                                            </xf:item>
                                        </xf:select1>
                                        <!--<xf:select ref="@sourceReference" appearance="full">
                                            <xf:label>
                                                <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                            </xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                <xf:value value="concat('#', @id)"/>
                                            </xf:itemset>
                                        </xf:select>-->
                                    </xf:group>
                                </xf:group>
                                <xf:group ref="eac:toDate">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                    <xf:group ref="self::eac:toDate">
                                        <xf:input ref="@standardDate" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notBefore" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:input ref="@notAfter" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                        </xf:input>
                                        <xf:select1 ref="@certainty" incremental="true">
                                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                            <xf:item>
                                                <xf:label>Certain</xf:label>
                                                <xf:value>certain</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Approximate</xf:label>
                                                <xf:value>approximate</xf:value>
                                            </xf:item>
                                            <xf:item>
                                                <xf:label>Uncertain</xf:label>
                                                <xf:value>uncertain</xf:value>
                                            </xf:item>
                                        </xf:select1>
                                        <!--<xf:select ref="@sourceReference" appearance="full">
                                            <xf:label>
                                                <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                            </xf:label>
                                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                <xf:value value="concat('#', @id)"/>
                                            </xf:itemset>
                                        </xf:select>-->
                                    </xf:group>
                                </xf:group>
                            </xf:group>
                        </xf:repeat>
                        <xf:trigger class="trigger">
                            <xf:label>Ajouter une date à l'ensemble</xf:label>
                            <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger class="trigger">
                            <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                            <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                            <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                            <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:trigger ref="self::eac:chronItem[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                        <xf:label>
                            Dater (ensemble de dates)
                        </xf:label>
                        <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateSet" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>

                    <xf:group ref="eac:place">
                        <xf:label>
                            <xf:output value="'Lieu'"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer un lieu'"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-place']/tei:div[@type='description']"/></xf:help>
                        <!--<xf:repeat nodeset="eac:placeRole">
                            <xf:input ref=".">
                                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeRole']/tei:div[@type='fullName']"/>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeRole']/tei:div[@type='description']"/></xf:help>
                            </xf:input>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeRole']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                        </xf:repeat>-->
                        <!--<xf:trigger class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeRole']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert if="self::eac:place[eac:placeRole]" context="." nodeset="eac:placeRole" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeRole" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[not(eac:placeRole)]" context="." nodeset="*" at="1" position="before" origin="instance('eacPlace')/eac:place/eac:placeRole" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <xf:repeat nodeset="eac:placeName">
                            <xf:input ref=".">
                                <xf:label>
                                    Nom de lieu
                                    <xf:trigger ref="self::eac:placeName[parent::eac:place[count(eac:placeName)>1]]" class="del">
                                        <xf:label>×</xf:label>
                                        <xf:hint>
                                            <xf:output value="'Supprimer un nom de lieu'"/>
                                        </xf:hint>
                                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                                    </xf:trigger>
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-placeName']/tei:div[@type='description']"/></xf:help>
                            </xf:input>
                        </xf:repeat>
                        <xf:trigger class="trigger">
                            <xf:label>Ajouter un nom de lieu</xf:label>
                            <xf:insert if="self::eac:place[eac:placeName]" context="." nodeset="eac:placeName" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[not(eac:placeName)][eac:placeRole]" context="." nodeset="eac:placeRole" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[not(eac:placeName)][not(eac:placeRole)]" context="." nodeset="*" position="before" origin="instance('eacPlace')/eac:place/eac:placeName" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:repeat nodeset="eac:address">
                            <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-address']/tei:div[@type='fullName']"/>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-address']/tei:div[@type='description']"/></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-address']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-addressLine']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:insert context="." nodeset="eac:addressLine" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address/eac:addressLine" ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:repeat nodeset="eac:addressLine">
                                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-addressLine']/tei:div[@type='fullName']"/>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-addressLine']/tei:div[@type='description']"/></xf:help>
                                <xf:input ref="."/>
                                <xf:group class="trigger">
                                    <xf:trigger ref="self::eac:addressLine[count(parent::eac:address/eac:addressLine)>1]">
                                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-addressLine']/tei:div[@type='fullName'])"/></xf:label>
                                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                                    </xf:trigger>
                                </xf:group>
                            </xf:repeat>
                        </xf:repeat>-->
                        <!--<xf:trigger class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-address']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert if="self::eac:place[eac:address]" context="." nodeset="eac:address" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[eac:placeName or eac:placeRole][not(eac:address)]" context="." nodeset="*[self::eac:placeName or self::eac:placeRole]" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[not(eac:placeName)][not(eac:placeRole)][not(eac:address)]" context="." nodeset="*" position="before" origin="instance('eacPlace')/eac:place/eac:address" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <!--<xf:group ref="eac:date">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    &lt;!&ndash;↺&ndash;&gt;
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                        <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                        <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:date" ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                        <xf:insert context="parent::eac:place/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:date" ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:group ref="self::eac:date">
                                <xf:input ref="@standardDate" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notBefore" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:input ref="@notAfter" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                </xf:input>
                                <xf:select1 ref="@certainty" incremental="true">
                                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                    <xf:item>
                                        <xf:label>Certain</xf:label>
                                        <xf:value>certain</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Approximate</xf:label>
                                        <xf:value>approximate</xf:value>
                                    </xf:item>
                                    <xf:item>
                                        <xf:label>Uncertain</xf:label>
                                        <xf:value>uncertain</xf:value>
                                    </xf:item>
                                </xf:select1>
                                <xf:select ref="@sourceReference" appearance="full">
                                    <xf:label>
                                        <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                    </xf:label>
                                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                    <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                        &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                        <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                        <xf:value value="concat('#', @id)"/>
                                    </xf:itemset>
                                </xf:select>
                            </xf:group>
                        </xf:group>
                        <xf:trigger ref="self::eac:place[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert if="self::eac:place[not(eac:descriptiveNote)]" context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[eac:descriptiveNote]" context="." nodeset="eac:descriptiveNote" position="before" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:group ref="eac:dateRange">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:dateRange" ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                        <xf:insert context="parent::eac:place/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:dateRange" ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>
                                </xf:group>
                            </xf:group>
                        </xf:group>
                        <xf:trigger ref="self::eac:place[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert if="self::eac:place[not(eac:descriptiveNote)]" context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert if="self::eac:place[eac:descriptiveNote]" context="." nodeset="eac:descriptiveNote" position="before" origin="instance('eacDates')/eac:dateRange"/>
                            </xf:action>
                            <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                            <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:group ref="eac:dateSet">
                            <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                                <xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName']" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])"/></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:dateSet" ev:event="DOMActivate"/>
                                </xf:trigger>
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:action ev:event="DOMActivate">
                                        <xf:insert context="parent::eac:place" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                        <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                        <xf:insert context="parent::eac:place/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                    </xf:action>
                                    <xf:delete nodeset="parent::eac:place/eac:dateSet" ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:repeat nodeset="*" id="useDates-dateSet">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                                <xf:group class="trigger">
                                    <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]">
                                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName'])"/></xf:label>
                                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                                    </xf:trigger>
                                </xf:group>
                                <xf:group ref="self::eac:date">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>
                                </xf:group>
                                <xf:group ref="self::eac:dateRange">
                                    <xf:group ref="eac:fromDate">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                        <xf:group ref="self::eac:fromDate">
                                            <xf:input ref="@standardDate" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:input ref="@notBefore" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:input ref="@notAfter" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:select1 ref="@certainty" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                                <xf:item>
                                                    <xf:label>Certain</xf:label>
                                                    <xf:value>certain</xf:value>
                                                </xf:item>
                                                <xf:item>
                                                    <xf:label>Approximate</xf:label>
                                                    <xf:value>approximate</xf:value>
                                                </xf:item>
                                                <xf:item>
                                                    <xf:label>Uncertain</xf:label>
                                                    <xf:value>uncertain</xf:value>
                                                </xf:item>
                                            </xf:select1>
                                            <xf:select ref="@sourceReference" appearance="full">
                                                <xf:label>
                                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                                </xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                    <xf:value value="concat('#', @id)"/>
                                                </xf:itemset>
                                            </xf:select>
                                        </xf:group>
                                    </xf:group>
                                    <xf:group ref="eac:toDate">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                        <xf:group ref="self::eac:toDate">
                                            <xf:input ref="@standardDate" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:input ref="@notBefore" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:input ref="@notAfter" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                            </xf:input>
                                            <xf:select1 ref="@certainty" incremental="true">
                                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                                <xf:item>
                                                    <xf:label>Certain</xf:label>
                                                    <xf:value>certain</xf:value>
                                                </xf:item>
                                                <xf:item>
                                                    <xf:label>Approximate</xf:label>
                                                    <xf:value>approximate</xf:value>
                                                </xf:item>
                                                <xf:item>
                                                    <xf:label>Uncertain</xf:label>
                                                    <xf:value>uncertain</xf:value>
                                                </xf:item>
                                            </xf:select1>
                                            <xf:select ref="@sourceReference" appearance="full">
                                                <xf:label>
                                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                                </xf:label>
                                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                                    <xf:value value="concat('#', @id)"/>
                                                </xf:itemset>
                                            </xf:select>
                                        </xf:group>
                                    </xf:group>
                                </xf:group>
                            </xf:repeat>
                            <xf:trigger class="trigger">
                                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                            </xf:trigger>
                            <xf:trigger class="trigger">
                                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                                <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                                <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                                <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <xf:trigger ref="self::eac:place[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert if="self::eac:place[not(eac:descriptiveNote)]" context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                            <xf:insert if="self::eac:place[eac:descriptiveNote]" context="." nodeset="eac:descriptiveNote" position="before" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:group ref="eac:descriptiveNote">
                            <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName']"/>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                            <xf:group class="trigger">
                                <xf:trigger>
                                    <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName'])" /></xf:label>
                                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                                </xf:trigger>
                            </xf:group>
                            <xf:repeat nodeset="eac:p">
                                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName']"/>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                                <xf:textarea ref="."/>
                                <xf:group class="trigger">
                                    <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]">
                                        <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName'])" /></xf:label>
                                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                                    </xf:trigger>
                                </xf:group>
                            </xf:repeat>
                            <xf:trigger class="trigger">
                                <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='fullName'])" /></xf:label>
                                <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <xf:trigger ref="self::eac:place[not(eac:descriptiveNote)]" clas="trigger">
                            <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacPlace')/eac:place/eac:descriptiveNote" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                    </xf:group>
                    <xf:trigger ref="self::eac:chronItem[not(eac:place)][not(eac:chronItemSet)]" class="trigger">
                        <xf:label>Ajouter un lieu</xf:label>
                        <xf:insert context="." nodeset="*[self::eac:date or self::eac:dateRange or self::eac:dateSet or self::eac:event]" at="last()" position="after" origin="instance('eacChronItem')/eac:chronItem/eac:place" ev:event="DOMActivate"/>
                    </xf:trigger>


                    <!--<xf:trigger ref="self::eac:chronItem[not(eac:chronItemSet)][not(eac:event)]" class="trigger">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-chronItemSet']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:action ev:event="DOMActivate">
                            <xf:insert if="self::eac:chronItem[eac:date or eac:dateRange or eac:dateSet]" context="." nodeset="*[self::eac:date or self::eac:dateRange or self::eac:dateSet]" at="1" position="after" origin="instance('eacChronItemSet')/eac:chronItemSet"/>
                            <xf:insert if="self::eac:chronItem[not(eac:date or eac:dateRange or eac:dateSet)]" context="." nodeset="*" at="1" position="before" origin="instance('eacChronItemSet')/eac:chronItemSet"/>
                        </xf:action>
                        <xf:delete ev:event="DOMActivate" nodeset="eac:chronItemSet/eac:place"/>
                    </xf:trigger>-->
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un évènement</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="eac:chronItem" at="last()" position="after" origin="instance('eacChronItem')/eac:chronItem"/>
                    </xf:action>
                    <xf:action ev:event="DOMActivate">
                        <!--<xf:delete nodeset="eac:chronItem[last()]"/>-->
                        <!--@todo generate-id() with BaseX-->
                        <xf:dispatch name="getid" targetid="entity"/>
                    </xf:action>
                </xf:trigger>
            </xf:repeat>
            <xf:trigger ref="self::eac:biogHist[not(eac:chronList)]" class="trigger">
                <xf:label>Ajouter une liste chronologique</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacBiogHist')/eac:biogHist/eac:chronList"/>
                </xf:action>
                <!--<xf:action ev:event="DOMActivate">
                    <xf:insert context="eac:chronList[last()]" nodeset="*" origin="instance('eacChronItem')/eac:chronItem"/>
                </xf:action>-->
                <xf:action ev:event="DOMActivate">
                    <!--<xf:delete nodeset="eac:chronList/eac:chronItem[last()]/*[name(.)!='event']"/>-->
                    <!--@todo generate-id() with BaseX-->
                    <xf:dispatch name="getid" targetid="entity"/>
                </xf:action>
            </xf:trigger>
        </xf:group>
    </xf:case>
    <xf:case id="relationsPanel" selected="false">
        <xf:group class="trigger">
            <xf:trigger ref="eac:cpfDescription[not(eac:relations)]">
                <xf:label>Ajouter des relations</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacRelations')/eac:relations"/>
                    <xf:action while="count(eac:relations/eac:relation/eac:targetEntity/eac:part) &lt; 4">
                        <xf:insert context="eac:relations/eac:relation/eac:targetEntity" nodeset="eac:part" at="last()" position="after" origin="instance('eacRelations')/eac:relations/eac:relation/eac:targetEntity/eac:part"/>
                    </xf:action>
                </xf:action>
                <xf:setvalue ref="eac:relations/eac:relation/eac:targetEntity/eac:part[1]/@localType" value="'full'" ev:event="DOMActivate"/>
                <xf:setvalue ref="eac:relations/eac:relation/eac:targetEntity/eac:part[2]/@localType" value="'status'" ev:event="DOMActivate"/>
                <xf:setvalue ref="eac:relations/eac:relation/eac:targetEntity/eac:part[3]/@localType" value="'occupationType'" ev:event="DOMActivate"/>
                <xf:setvalue ref="eac:relations/eac:relation/eac:targetEntity/eac:part[4]/@localType" value="'xprRef'" ev:event="DOMActivate"/>
                <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
            </xf:trigger>
        </xf:group>
        <xf:group ref="eac:cpfDescription/eac:relations">
            <xf:label>
                Relations
                <xf:trigger class="del">
                    <xf:label>×</xf:label>
                    <xf:hint>
                        <xf:output value="'Supprimer les relations'"/>
                    </xf:hint>
                    <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:label>
            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relations']/tei:div[@type='description']"/></xf:help>
            <xf:repeat nodeset="eac:relation">
                <xf:label>
                    <xf:output value="
                    concat(
                    'Relation',
                    if(normalize-space(eac:targetEntity/eac:part)!='', concat(' (', eac:targetEntity/eac:part,')'), '')
                    )"/>
                    <xf:trigger class="del">
                        <xf:label>×</xf:label>
                        <xf:hint>
                            <xf:output value="'Supprimer une relation'"/>
                        </xf:hint>
                        <xf:delete nodeset="." ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:label>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relation']/tei:div[@type='description']"/></xf:help>
                <xf:group ref="self::eac:relation[@target]">
                    <xf:select ref="@target" appearance="full">
                        <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-target']/tei:div[@type='fullName']"/>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-target']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')//eac:chronItem[@id!='']">
                            <!--@todo Q° multiple references inside one source !-->
                            <xf:label ref="eac:event"/>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                </xf:group>
                <xf:group ref="eac:targetEntity">
                    <xf:label>Entité</xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-targetEntity']/tei:div[@type='description']"/></xf:help>
                    <!--
              only full name for relation
              <xf:group class="trigger">
                <xf:trigger>
                  <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='fullName'])"/></xf:label>
                  <xf:insert context="." nodeset="eac:part" at="last()" position="after" origin="instance('eacRelations')/eac:relations/eac:relation/eac:targetEntity/eac:part" ev:event="DOMActivate"/>
                </xf:trigger>
              </xf:group>-->
                    <xf:group ref="self::eac:targetEntity">
                        <xf:select1 ref="@targetType">
                            <xf:label>
                                <xf:output value="'Type d’entité'"/>
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-targetType']/tei:div[@type='description']"/></xf:help>
                            <!--<xf:item>
                                <xf:label>agent</xf:label>
                                <xf:value>agent</xf:value>
                            </xf:item>-->
                            <xf:item>
                                <xf:label>corporateBody</xf:label>
                                <xf:value>corporateBody</xf:value>
                            </xf:item>
                            <!--<xf:item>
                                <xf:label>function</xf:label>
                                <xf:value>function</xf:value>
                            </xf:item>-->
                            <xf:item>
                                <xf:label>family</xf:label>
                                <xf:value>family</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>person</xf:label>
                                <xf:value>person</xf:value>
                            </xf:item>
                            <!--<xf:item>
                                <xf:label>resource</xf:label>
                                <xf:value>resource</xf:value>
                            </xf:item>-->
                        </xf:select1>
                        <xf:input ref="eac:part[@localType='full']">
                            <xf:label>Dénomination</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='description']"/></xf:help>
                        </xf:input>
                        <xf:input ref="eac:part[@localType='status']">
                            <xf:label>Qualités</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='description']"/></xf:help>
                        </xf:input>
                        <xf:select1 ref="eac:part[@localType='occupationType']">
                            <xf:label>Type de profession</xf:label>
                            <xf:choices>
                                <xf:label>Bâtiment</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Bâtiment']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                            <xf:choices>
                                <xf:label>Droit</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Droit']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                            <xf:choices>
                                <xf:label>Commerce</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Commerce']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                            <xf:choices>
                                <xf:label>Métiers (hors bâtiment)</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Métiers (hors bâtiment)']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                            <xf:choices>
                                <xf:label>Armée</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Armée']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                            <xf:choices>
                                <xf:label>Autres</xf:label>
                                <xf:itemset ref="instance('occupationTypes')/group[normalize-space(label)='Autres']/type">
                                    <xf:label ref="."/>
                                    <xf:value value="concat(parent::group/label, ';', .)"/>
                                </xf:itemset>
                            </xf:choices>
                        </xf:select1>
                        <xf:select1 ref="eac:part[@localType='xprRef']">
                            <xf:label>Identifiant base de données Experts</xf:label>
                            <xf:itemset nodeset="instance('xprEntities')/xpr:entity">
                                <xf:label ref="xpr:label"/>
                                <xf:value value="concat('#', @xml:id)"/>
                            </xf:itemset>
                        </xf:select1>
                        <!--<xf:group ref="eac:part">
                            <xf:input ref=".">
                                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='fullName']"/>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-part']/tei:div[@type='description']"/></xf:help>
                            </xf:input>
                            <xf:select1 ref="@localType">
                                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-localType']/tei:div[@type='fullName']"/>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-localType']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('nameParts')/part">
                                    <xf:label ref="."/>
                                    <xf:value ref="."/>
                                </xf:itemset>
                            </xf:select1>
                        </xf:group>-->
                    </xf:group>
                </xf:group>
                <xf:repeat nodeset="eac:relationType">
                    <xf:select1 ref="." incremental="true">
                        <!--<xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relationType']/tei:div[@type='fullName']"/>-->
                        <xf:label>
                            <xf:output value="'Type de relation'"/>
                            <xf:trigger class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="'Supprimer un type relation'"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relationType']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('relationTypes')/type">
                            <xf:label><xf:output value="concat(instance('eacInstance')/eac:cpfDescription/eac:identity/eac:nameEntry[@preferredForm='true'][@status='authorized'][1], ' ', label)" /></xf:label>
                            <xf:value ref="value"/>
                        </xf:itemset>
                        <xf:action ev:event="xforms-value-changed">
                            <xf:setvalue ref="@valueURI" value="instance('relationTypes')//type[.=current()]/@valueURI"/>
                            <xf:setvalue ref="@vocabularySource" value="instance('relationTypes')//type[.=current()]/@vocabularySource"/>
                            <xf:setvalue ref="@vocabularySourceURI" value="instance('relationTypes')//type[.=current()]/@vocabularySourceURI"/>
                        </xf:action>
                    </xf:select1>
                    <xf:select1 ref="following-sibling::*[1][self::eac:targetRole[preceding-sibling::*[1][self::eac:relationType] = instance('relationTypes')/type[roles]/label]]">
                        <xf:label>
                            <xf:output value="'Rôle'"/>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relationType']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('relationTypes')/type[label = current()/preceding-sibling::*[1][self::eac:relationType]]/roles/role">
                            <xf:label ref="."/>
                            <xf:value ref="."/>
                        </xf:itemset>
                    </xf:select1>
                    <xf:input ref="following-sibling::*[1][self::eac:targetRole[preceding-sibling::*[1][self::eac:relationType] = instance('relationTypes')/type[not(roles)]/label or preceding-sibling::*[1][self::eac:relationType] = '']]">
                        <xf:label>
                            <xf:output value="'Rôle'"/>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-targetRole']/tei:div[@type='description']"/></xf:help>
                    </xf:input>
                    <xf:select ref="@sourceReference" appearance="full">
                        <xf:label>
                            <xf:output value="concat(
                        'Référence(s)',
                        if(normalize-space(parent::eac:relationType/following-sibling::*[1][self::eac:targetRole])!='', concat(' (', normalize-space(parent::eac:relationType/following-sibling::*[1][self::eac:targetRole]), ')') , '')
                        )"/>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                            <!--@todo Q° multiple references inside one source !-->
                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                            <xf:value value="concat('#', @id)"/>
                        </xf:itemset>
                    </xf:select>
                    <!--<xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-relationType']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:delete nodeset="following-sibling::*[1][self::eac:targetRole]" ev:event="DOMActivate"/>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>-->
                </xf:repeat>
                <xf:trigger class="trigger">
                    <xf:label>Ajouter un type de relation</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="*[self::eac:targetEntity or self::eac:date or self::eac:dateSet or self::eac:dateRange or self::eac:place or self::eac:targetRole]" at="last()" position="after" origin="instance('eacRelation')/eac:relation/eac:relationType"/>
                        <xf:insert context="." nodeset="eac:relationType" at="last()" position="after" origin="instance('eacRelation')/eac:relation/eac:targetRole"/>
                    </xf:action>

                    <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
                </xf:trigger>
                <!--<xf:repeat nodeset="eac:targetRole">
              <xf:input ref=".">
                <xf:label ref="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-targetRole']/tei:div[@type='fullName']"/>
                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-targetRole']/tei:div[@type='description']"/></xf:help>
              </xf:input>
              <xf:group class="trigger">
                <xf:trigger>
                  <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-targetRole']/tei:div[@type='fullName'])" /></xf:label>
                  <xf:delete nodeset="." ev:event="DOMActivate"/>
                </xf:trigger>
              </xf:group>
            </xf:repeat>-->
                <!--<xf:group ref="eac:date">
                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName']" /></xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            &lt;!&ndash;↺&ndash;&gt;
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:relation/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <xf:select ref="@sourceReference" appearance="full">
                            <xf:label>
                                <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                    <xf:insert context="." nodeset="eac:targetEntity" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateRange">
                    <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName']" /></xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:relation/eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:group ref="eac:fromDate">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:fromDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:toDate">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:toDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>
                        </xf:group>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="eac:targetEntity" position="after" origin="instance('eacDates')/eac:dateRange"/>
                    </xf:action>
                    <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateSet">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName']" />
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                    <xf:group class="trigger">
                        <xf:trigger>
                            <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])"/></xf:label>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:group>
                    <xf:repeat nodeset="*" id="useDates-dateSet">
                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName']" /></xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                        <xf:group class="trigger">
                            <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]">
                                <xf:label><xf:output value="concat('- ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='fullName'])"/></xf:label>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:group>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>
                        </xf:group>
                        <xf:group ref="self::eac:dateRange">
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>
                                </xf:group>
                            </xf:group>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger class="trigger">
                        <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])"/></xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date)][not(eac:dateRange)][not(eac:dateSet)]" class="trigger">
                    <xf:label><xf:output value="concat('+ ', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='fullName'])"/></xf:label>
                    <xf:insert context="." nodeset="eac:targetEntity" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                </xf:trigger>-->
                <xf:group ref="eac:date">
                    <xf:label>
                        <xf:output value="concat(
                            'Date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="concat(
                            'Supprimer une date',
                            if(normalize-space(@*[local-name()!='certainty'])!='', concat(' (', @*[local-name()!='certainty'], ')'), ''))"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <!--↺-->
                            <xf:label><xf:output value="concat('⇆', 'intervalle')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                                <xf:setvalue ref="parent::eac:relation/eac:dateRange/eac:fromDate/@standardDate" value="current()/@standardDate"/>
                                <xf:setvalue ref="parent::eac:relation/eac:dateRange/eac:fromDate/@notBefore" value="current()/@notBefore"/>
                                <xf:setvalue ref="parent::eac:relation/eac:dateRange/eac:fromDate/@notAfter" value="current()/@notAfter"/>
                                <xf:setvalue ref="parent::eac:relation/eac:dateRange/eac:fromDate/@certainty" value="current()/@certainty"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:relation/eac:dateSet" nodeset="*" origin="parent::eac:relation/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:date" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="self::eac:date">
                        <xf:input ref="@standardDate" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notBefore" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:input ref="@notAfter" incremental="true">
                            <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                        </xf:input>
                        <xf:select1 ref="@certainty" incremental="true">
                            <xf:label>Certitude</xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                            <xf:item>
                                <xf:label>Certain</xf:label>
                                <xf:value>certain</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Approximate</xf:label>
                                <xf:value>approximate</xf:value>
                            </xf:item>
                            <xf:item>
                                <xf:label>Uncertain</xf:label>
                                <xf:value>uncertain</xf:value>
                            </xf:item>
                        </xf:select1>
                        <!--<xf:select ref="@sourceReference" appearance="full">
                            <xf:label>
                                <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                            </xf:label>
                            <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                            <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                <xf:value value="concat('#', @id)"/>
                            </xf:itemset>
                        </xf:select>-->
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>Dater (date simple)</xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateRange">
                    <xf:label>
                        <xf:output value="'Intervalle'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un intervalle'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', 'ensemble de dates')" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:dateSet"/>
                                <xf:insert context="parent::eac:relation/eac:dateSet" nodeset="*" origin="parent::eac:relation/eac:dateRange"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateRange" ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='description']" /></xf:help>
                    <xf:group ref="eac:fromDate">
                        <xf:label>Date de début</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:fromDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                    <xf:group ref="eac:toDate">
                        <xf:label>Date de fin</xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:toDate">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label>Certitude</xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                    </xf:group>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (intervalle)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateRange" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                </xf:trigger>
                <xf:group ref="eac:dateSet">
                    <xf:label class="{if(is-valid(.), 'valid', 'invalid')}">
                        <xf:output value="'Ensemble de dates'"/>
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer un ensemble de dates'"/>
                            </xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                        <!--<xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:dateRange" position="after" origin="instance('eacDates')/eac:date"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>
                        <xf:trigger>
                            <xf:label><xf:output value="concat('⇆', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateRange']/tei:div[@type='fullName'])" /></xf:label>
                            <xf:action ev:event="DOMActivate">
                                <xf:insert context="parent::eac:relation" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:dateRange"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" origin="instance('eacDates')/eac:fromDate"/>
                                <xf:insert context="parent::eac:relation/eac:dateRange" nodeset="*" position="after" origin="instance('eacDates')/eac:toDate"/>
                            </xf:action>
                            <xf:delete nodeset="parent::eac:relation/eac:dateSet" ev:event="DOMActivate"/>
                        </xf:trigger>-->
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-dateSet']/tei:div[@type='description']" /></xf:help>
                    <xf:repeat nodeset="self::eac:dateSet/*">
                        <xf:label>
                            <xf:output value="if(self::eac:date, 'Date', 'Intervalle')" />
                            <xf:trigger ref="self::*[parent::eac:dateSet[count(*) > 2]]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>
                                    <xf:output value="concat('Supprimer ', if(self::eac:date, 'une date', 'un intervalle'))"/>
                                </xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id=concat('elem-', name(current()))]/tei:div[@type='description']" /></xf:help>
                        <xf:group ref="self::eac:date">
                            <xf:input ref="@standardDate" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notBefore" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:input ref="@notAfter" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                            </xf:input>
                            <xf:select1 ref="@certainty" incremental="true">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                <xf:item>
                                    <xf:label>Certain</xf:label>
                                    <xf:value>certain</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Approximate</xf:label>
                                    <xf:value>approximate</xf:value>
                                </xf:item>
                                <xf:item>
                                    <xf:label>Uncertain</xf:label>
                                    <xf:value>uncertain</xf:value>
                                </xf:item>
                            </xf:select1>
                            <!--<xf:select ref="@sourceReference" appearance="full">
                                <xf:label>
                                    <xf:output value="concat(
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'],
                                    ' (',
                                    instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-date']/tei:div[@type='fullName'],
                                    ')')" />
                                </xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                    &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                    <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                    <xf:value value="concat('#', @id)"/>
                                </xf:itemset>
                            </xf:select>-->
                        </xf:group>
                        <xf:group ref="self::eac:dateRange">
                            <xf:group ref="eac:fromDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:fromDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-fromDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                            <xf:group ref="eac:toDate">
                                <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName']" /></xf:label>
                                <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='description']" /></xf:help>
                                <xf:group ref="self::eac:toDate">
                                    <xf:input ref="@standardDate" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-standardDate']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notBefore" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notBefore']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:input ref="@notAfter" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-notAfter']/tei:div[@type='description']" /></xf:help>
                                    </xf:input>
                                    <xf:select1 ref="@certainty" incremental="true">
                                        <xf:label><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='fullName']" /></xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-certainty']/tei:div[@type='description']" /></xf:help>
                                        <xf:item>
                                            <xf:label>Certain</xf:label>
                                            <xf:value>certain</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Approximate</xf:label>
                                            <xf:value>approximate</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Uncertain</xf:label>
                                            <xf:value>uncertain</xf:value>
                                        </xf:item>
                                    </xf:select1>
                                    <!--<xf:select ref="@sourceReference" appearance="full">
                                        <xf:label>
                                            <xf:output value="concat(instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='fullName'], ' (', instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-toDate']/tei:div[@type='fullName'], ')')" />
                                        </xf:label>
                                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='attributes']/tei:div[@xml:id='attr-sourceReference']/tei:div[@type='description']"/></xf:help>
                                        <xf:itemset ref="instance('eacInstance')/eac:control/eac:sources/eac:source[@id!='']">
                                            &lt;!&ndash;@todo Q° multiple references inside one source !&ndash;&gt;
                                            <xf:label><xf:output value="string-join(*, ', ')" /></xf:label>
                                            <xf:value value="concat('#', @id)"/>
                                        </xf:itemset>
                                    </xf:select>-->
                                </xf:group>
                            </xf:group>
                        </xf:group>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter une date à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    </xf:trigger>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un intervalle à l'ensemble</xf:label>
                        <xf:insert context="." nodeset="*" at="last()" position="after" origin="instance('eacDates')/eac:dateRange" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="*" origin="instance('eacDates')/eac:fromDate" ev:event="DOMActivate"/>
                        <xf:insert context="eac:dateRange[last()]" nodeset="eac:fromDate" position="after" origin="instance('eacDates')/eac:toDate" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:date) and not(eac:dateRange) and not(eac:dateSet)]" class="trigger">
                    <xf:label>
                        Dater (ensemble de dates)
                    </xf:label>
                    <xf:insert context="." nodeset="eac:term" position="after" origin="instance('eacDates')/eac:dateSet" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="*" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                    <xf:insert context="eac:dateSet" nodeset="eac:date" position="after" origin="instance('eacDates')/eac:date" ev:event="DOMActivate"/>
                </xf:trigger>

                <xf:group ref="eac:descriptiveNote">
                    <xf:label>
                        <xf:output value="'Note'" />
                        <xf:trigger class="del">
                            <xf:label>×</xf:label>
                            <xf:hint>
                                <xf:output value="'Supprimer la note'" /></xf:hint>
                            <xf:delete nodeset="." ev:event="DOMActivate"/>
                        </xf:trigger>
                    </xf:label>
                    <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-descriptiveNote']/tei:div[@type='description']"/></xf:help>
                    <xf:repeat nodeset="eac:p">
                        <xf:label>
                            Paragraphe
                            <xf:trigger ref="self::eac:p[count(parent::eac:descriptiveNote/eac:p) > 1]" class="del">
                                <xf:label>×</xf:label>
                                <xf:hint>Supprimer un paragraphe</xf:hint>
                                <xf:delete nodeset="." ev:event="DOMActivate"/>
                            </xf:trigger>
                        </xf:label>
                        <xf:help><xf:output value="instance('documentation')/tei:text/tei:body/tei:div[@type='elements']/tei:div[@xml:id='elem-p']/tei:div[@type='description']"/></xf:help>
                        <xf:textarea ref="."/>
                    </xf:repeat>
                    <xf:trigger class="trigger">
                        <xf:label>Ajouter un paragraphe</xf:label>
                        <xf:insert context="." nodeset="eac:p" at="last()" position="after()" origin="instance(eacSource)/eac:source/eac:descriptiveNote/eac:p" ev:event="DOMActivate"/>
                    </xf:trigger>
                </xf:group>
                <xf:trigger ref="self::eac:relation[not(eac:descriptiveNote)]" class="trigger">
                    <xf:label>
                        <xf:output value="'Ajouter une note '" />
                    </xf:label>
                    <xf:insert context="." nodeset="eac:reference" origin="instance('eacSources')/eac:sources/eac:source/eac:descriptiveNote" at="last()" position="after" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:repeat>
            <xf:group class="trigger">
                <xf:trigger>
                    <xf:label>Ajouter une relation</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="eac:relation" at="last()" position="after" origin="instance('eacRelations')/eac:relations/eac:relation"/>
                        <xf:action while="count(eac:relation[last()]/eac:targetEntity/eac:part) &lt; 4">
                            <xf:insert context="eac:relation[last()]" nodeset="eac:targetEntity/eac:part" at="last()" position="after" origin="instance('eacRelations')/eac:relations/eac:relation/eac:targetEntity/eac:part"/>
                        </xf:action>
                    </xf:action>
                    <xf:action ev:event="DOMActivate">
                        <xf:setvalue ref="eac:relation[last()]//eac:part[1]/@localType" value="'full'"/>
                        <xf:setvalue ref="eac:relation[last()]//eac:part[2]/@localType" value="'status'"/>
                        <xf:setvalue ref="eac:relation[last()]//eac:part[3]/@localType" value="'occupationType'"/>
                        <xf:setvalue ref="eac:relation[last()]//eac:part[4]/@localType" value="'xprRef'"/>
                    </xf:action>
                    <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
            <xf:group class="trigger">
                <xf:trigger ref=".[ancestor::eac:cpfDescription//eac:chronItem[@localType='reception']]">
                    <xf:label>Ajouter les relations citées dans le dossier de réception</xf:label>
                    <xf:action ev:event="DOMActivate">
                        <xf:setvalue ref="instance('eacRelations4Reception')//eac:relationType/@sourceReference" value="instance('eacInstance')/eac:cpfDescription//eac:chronItem[@localType='reception']/@sourceReference"/>
                        <xf:setvalue ref="instance('eacRelations4Reception')//eac:relation/@target" value="concat('#', instance('eacInstance')/eac:cpfDescription//eac:chronItem[@localType='reception']/@id)"/>
                    </xf:action>
                    <xf:action ev:event="DOMActivate">
                        <xf:insert context="." nodeset="eac:relation" at="last()" position="after" origin="instance('eacRelations4Reception')/eac:relations//eac:relation"/>
                    </xf:action>
                    <xf:dispatch name="getid" targetid="entity" ev:event="DOMActivate"/>
                </xf:trigger>
            </xf:group>
        </xf:group>
    </xf:case>
    <xf:case id="commentPanel" selected="false">
        <xf:group ref="comment()">
            <xf:textarea ref=".">
                <xf:label>Commentaire sur le formulaire</xf:label>
            </xf:textarea>
        </xf:group>
    </xf:case>
    <xf:trigger>
        <xf:label>Enregistrer</xf:label>
        <xf:action ev:event="DOMActivate">
            <!-- @maintenanceStatus -->
            <xf:setvalue if="eac:control/@maintenanceStatus = 'new'" ref="eac:control/@maintenanceStatus" value="'updated'"/>
            <xf:setvalue if="eac:control/@maintenanceStatus = ''" ref="eac:control/@maintenanceStatus" value="'new'"/>

            <!-- agent -->
            <xf:setvalue ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]/eac:agent" value="instance('getAgent')/agent"/>

            <!-- @agentType -->
            <xf:setvalue ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]/eac:agent/@agentType" value="'human'"/>

            <!-- @maintenanceEventType -->
            <xf:setvalue if="count(eac:control/eac:maintenanceHistory/eac:maintenanceEvent) > 1" ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]/@maintenanceEventType" value="'revised'"/>
            <xf:setvalue if="count(eac:control/eac:maintenanceHistory/eac:maintenanceEvent) = 1" ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]/@maintenanceEventType" value="'created'"/>

            <!-- eventDateTime -->
            <xf:setvalue ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]/eac:eventDateTime/@standardDateTime" value="now()"/>
        </xf:action>
        <xf:show dialog="control" ev:event="DOMActivate"/>
    </xf:trigger>
    <xf:dialog id="control">
        <xf:group ref="eac:control/eac:maintenanceHistory/eac:maintenanceEvent[1]">
            <xf:input ref="eac:eventDescription">
                <xf:label>Motif de la révision</xf:label>
            </xf:input>
        </xf:group>
        <xf:trigger>
            <xf:label>Annuler</xf:label>
            <xf:hide ev:event="DOMActivate" dialog="control"/>
        </xf:trigger>
        <xf:submit submission="save2db">
            <xf:label>Valider</xf:label>
        </xf:submit>
    </xf:dialog>
    <!--<xf:submit submission="save2file">
        <xf:label>Save 2 file (with validation)</xf:label>
    </xf:submit>-->
</form>
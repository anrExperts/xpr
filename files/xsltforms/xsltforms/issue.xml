<?xml-stylesheet href="xsltforms.xsl" type="text/xsl"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:xf="http://www.w3.org/2002/xforms" xmlns:foo="foo" foo:bogus="ff fix">
    <head>
        <title>xforms-xsltforms</title>
        <xf:model>
            <xf:instance>
                <data xmlns="foo">
                    <entry id="entry-1">
                        <label>Entry 1</label>
                        <desc>Le lorem ipsum estâ€¦</desc>
                    </entry>
                    <entry>
                        <label>Entry 2</label>
                        <desc/>
                    </entry>
                </data>
            </xf:instance>
            <xf:bind nodeset="foo:entry/foo:desc" relevant="parent::foo:entry[@id]"/>
        </xf:model>
    </head>
    <body>
        <p>There is a binding rule for the description of the entries. This input is relevant if the entry has an id attribute.</p>
        <p>With repeat: the binding rule seems to be ignore, as the field is still available. With the same idea, I added a field to a non-existent element, and it is also available with repeat</p>
        <xf:repeat id="repeatEntry" nodeset="foo:entry"  appearance="full">
            <xf:label ref="foo:label"/>
            <br/>
            <xf:input ref="foo:desc" incremental="true">
                <xf:label>Description</xf:label>
            </xf:input>
            <br/>
            <xf:input ref="foo:none">
                <xf:label>non-existent element</xf:label>
            </xf:input>
        </xf:repeat>

        <p>Without repeat: the binding rule works perfectly and the non-existent element field is not diplayed.</p>
        <xf:group ref="foo:entry[last()]">
            <xf:label ref="foo:label"/>
            <br/>
            <xf:input ref="foo:desc" incremental="true">
                <xf:label>Description</xf:label>
            </xf:input>
            <br/>
            <xf:input ref="foo:none">
                <xf:label>non-existent element</xf:label>
            </xf:input>
        </xf:group>
    </body>
</html>